# 带外数据的检测
带外数据的发送和接收可以在recv和send中设置MSG_OOB选项实现。
带外数据的检测可以用**IO复用系统调用的异常事件**如（select）和**SIGURG信号**来完成。  

 从客户端的角度查看带外数据，当有新的紧急指针到达时，接收进程被通知到。首先，内核给接收套接字的属主进程发送SIGURG信号，前提是接收进程（或其他进程）曾调用fcntl或ioctl为这个套接字建立了宿主，而且该属主进程已为这个信号建立了信号处理函数。其次，如果接收进程阻塞在select调用中以等待这个套接字描述符出现一个异常条件，select调用就返回。  

带外数据检测的三个方法  
* select异常判定，因为OOB是select返回异常的唯一途径。  
* SIGURG信号，OOB到达时内核会给宿主进程发送SIGURG信号，通过自定义信号处理函数来接收OOB。注意必须设置socket宿主进程或进程组，fcntl( connfd, F_SETOWN, getpid() );  
* 使用sockatmark系统调用判断当前socket是否碰到带外字节，再进行相应的处理。  

